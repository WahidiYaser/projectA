<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>

<body onload="calculateSum()">


    <form action="" method="get" id="add-product-form">
        <div>
            <label for="p-name">Name</label>
            <input id="p-name" type="text">
        </div>
        <div>
            <label for="p-price">Price</label>
            <input id="p-price" type="number">
        </div>
        <button type="submit" value="submit" onclick="addProduct()"> submit </button>
    </form>
    <br>


    <table id="myTable">
        <thead>
            <tr>
                <th> name </th>
                <th> price </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td> screen </td>
                <td> 250 </td>
            </tr>
            <tr>
                <td> mouse </td>
                <td> 70 </td>
            </tr>
            <tr>
                <td> keybord </td>
                <td> 120 </td>
            </tr>
            <tr>
                <td> Sum </td>
                <td id="sum"> 0 </td>
            </tr>
        </tbody>
    </table>



    <script>
        function calculateSum() {
            document.getElementById("sum").innerText = 0
            let rows = document.querySelectorAll("tbody tr")
            let sum = 0
            for (let i = 0; i < rows.length; i++) {
                let cells = rows[i].children
                sum += parseInt(cells[1].innerText)
            }
            document.getElementById("sum").innerText = sum + ""
        }

        let form = document.getElementById("add-product-form")
        form.addEventListener("submit", addProduct)
        /* onckick submit do the same thing!!! */

        function addProduct(x) {
            x.preventDefault()

            let nameInput = document.getElementById("p-name")
            let priceInput = document.getElementById("p-price")
            /*
            let theTable = document.getElementById("myTable").querySelector("tbody")
            let theRow = theTable.insertRow(0)
            let td1 = theRow.insertCell(0)
            let td2 = theRow.insertCell(1)
            */

            let theRow = document.createElement("tr")
            let td1 = document.createElement("td")
            let td2 = document.createElement("td")

            td1.innerHTML = nameInput.value
            td2.innerHTML = priceInput.value

            theRow.appendChild(td1)
            theRow.appendChild(td2)


            let tBodyy = document.getElementById("myTable").querySelector("tbody")

            tBodyy.insertBefore(theRow, tBodyy.children[0])
            /* tBodyy.appendChild(theRow) */
            calculateSum()
        }
    </script>
</body>

</html>